<!DOCTYPE HTML>
<html>
<head>

</head>
<body>
<div id="chartContainer" style="height: 370px; max-width: 920px; margin: 0px auto;"></div>
<script src="https://canvasjs.com/assets/script/canvasjs.min.js"></script>
<script src="https://code.jquery.com/jquery-3.5.1.min.js" integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>
</body>
<script>


    window.onload = function () {

        var dataPoints = [];
        var chart = new CanvasJS.Chart("chartContainer",{
            animationEnabled: true,
            theme: "light2",
            title:{
                text:"Top 5 Usernames"
            },
            axisY: {
                title: "Appeared (Numbers)"
            },
            data: [{
                type: "column",
                showInLegend: true,
                legendMarkerColor: "grey",
                legendText: "User appeared",
                dataPoints : dataPoints,
            }]
        });
        $.getJSON("http://localhost:8080/api/top/users?topLimit=5", function(data) {
            $.each(data, function(key, value){
                console.log( "key:", JSON.stringify(key) );
                dataPoints.push({label: key, y: parseInt(value)});
            });
            console.log( "dataPoints:", JSON.stringify(dataPoints) );
            chart.render();
        });

    }
</script>
</html>
